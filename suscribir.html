<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="estilo.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <title>Nuevo Libro Anne Baileys</title>
    
</head>
<body>
    <div class="banner">
        <img src="img\cropped-cropped-coffee-and-book-vintage-image.jpg" alt="imgbanner" width="900" height="200"/>
    </div>

    <div class="menu">
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="Historia.html">Autora</a></li>
                <li><a href="#">Reseñas</a></li>
                <li><a href="suscribir.html">Suscripción</a></li>
            </ul>
        </nav>
    </div>
     
    <div class="clearfix"></div> 
    
    <div class="columna-1">
        <h2>suscribete</h2>

    </div>
    
    <div class="columna-2">
        <!-- comienzo formulario -->
			<div class="formulario">
                <form action="" method="get">
                    <div class="form-line">
                        <label for="nombre">Nombre</label>
                        <input name="nombre" id="nombre" placeholder="Juan Pérez" />
                    </div>
                
                    <div class="form-line">
                        <label for="email">Email</label>
                        <input name="email" id="email" placeholder="jperez@gmail.com" />
                    </div>        
                 
                    <div class="form-line">
                        <p>Género:</p>
                        <div class="radio-option">
                            <input type="radio" id="masculino" name="genero" value="masculino">
                            <label for="masculino">Masculino</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="femenino" name="genero" value="femenino">
                            <label for="femenino">Femenino</label>
                        </div>
                    </div>
                
                    <div class="form-line">
                        <label for="edad">Edad:</label>
                        <select name="edad" id="edad">
                            <option value="10-20">10-20</option>
                            <option value="21-30">21-30</option>
                            <option value="31-40">31-40</option>
                            <option value="41-50">41-50</option>
                            <option value="51-60">51-60</option>
                            <option value="61-70">61-70</option>
                            <option value="71-80">71-80</option>
                        </select>
                    </div>
                    
                    <div class="botones">
                        <button type="submit">Suscribir</button>
                        <button type="reset">Limpiar</button>
                    </div>
                </form>
                </div>
                <!-- Fin formulairo -->
    </div>


    <script> 
    const { createClient } = supabase;
    const baseURL = "https://hwwyuypdcxdigyfznqcw.supabase.co";
    const apiCall = "/rest/v1/registro";
    const apiKey =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjQzODM4OTEyLCJleHAiOjE5NTk0MTQ5MTJ9.tNykPvbzGeUsS7UoP2mNJNBjKUG6R76HPcNtLT1TjBc";
    const url = baseURL + apiCall;

        //variable contenedor
        const contenedor = document.querySelector("tbody");
        let resultados = "";

        const mostrar = (registros) => {
        registros.forEach((registro) => {
            resultados += ` 
                                <tr>
                                    <td>${registro.id}</td>
                                    <td>${registro.pname}</td>
                                    <td>${registro.fnac}</td>
                                    <td>${registro.especie}</td>
                                    <td>${registro.raza}</td>
                                    <td>${registro.sexo}</td>
                                    <td>${registro.peso}</td>
                                    <td>${registro.diagnostico}</td>
                                </tr>
                                `;
        });
        contenedor.innerHTML = resultados;
        };

        document.getElementById("btnload").addEventListener("click", () => {
        fetch(url, {
            headers: {
            method: "GET",
            "Content-Type": "application/json",
            apikey: apiKey,
            authorization: "Bearer " + apiKey,
            },
        })
            .then((response) => {
            console.dir(response);
            return response.json();
            })
            .then((data) => {
            console.dir(data);
            mostrar(data);
            return data;
            })
            .catch((error) => {
            console.dir(error);
            return error;
            });
        });
    </script>
</body>
</html>